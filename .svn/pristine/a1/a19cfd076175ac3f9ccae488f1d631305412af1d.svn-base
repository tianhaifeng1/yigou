package com.work.doctor.fruits.activity;

import android.os.Bundle;
import android.os.Handler;

import androidx.annotation.NonNull;

import com.t.httplib.yigou.YigouConstant;
import com.trjx.tbase.mvp.TPresenter;
import com.trjx.tlibs.uils.SharedPreferencesUtils;
import com.work.doctor.fruits.R;
import com.work.doctor.fruits.assist.DemoConstant;
import com.work.doctor.fruits.base.DemoMVPActivity;

public class WelcomeActivity extends DemoMVPActivity {

    private Handler handler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_welcome);

    }

    @Override
    protected void initView() {

        YigouConstant.token = (String) SharedPreferencesUtils.getParam(context, DemoConstant.user_token, "");
        DemoConstant.userId = (int) SharedPreferencesUtils.getParam(context, DemoConstant.user_id, -1);


        handler = new Handler();
        showPremission_all();
    }

    @Override
    protected TPresenter initPersenter() {
        return null;
    }


    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);

        handler.postDelayed(() -> {
            boolean isFirst = (Boolean) SharedPreferencesUtils.getParam(context, DemoConstant.user_first, true);
            if (isFirst) {
                skipActivity(GuideActivity.class);
            } else {
                skipActivity(MainNavActivity.class);
            }
        }, 500);

    }
}
